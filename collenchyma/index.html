<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `collenchyma` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, collenchyma">

    <title>collenchyma - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'collenchyma', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>collenchyma</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-0' class='srclink' href='../src/collenchyma/lib.rs.html#1-165' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Provides a simple and unified API to run fast and highly parallel computations on different
devices such as CPUs and GPUs, accross different computation languages such as OpenCL and
CUDA and allows you to swap your backend on run-time.</p>

<p>Collenchyma was started at <a href="http://autumnai.com">Autumn</a> to create an easy and performant abstraction over
different backends for the Machine Intelligence Framework <a href="https://github.com/autumnai/leaf">Leaf</a>, with no hard
dependency on any driver or libraries so that it can easily be used without the need for a
long and painful build process.</p>

<h2 id='abstract' class='section-header'><a href='#abstract'>Abstract</a></h2>
<p>Code often is executed on the native CPU, but could be executed on other devices such as GPUs
and Accelerators as well. These devices are accessable through frameworks like OpenCL and CUDA
but have a more complicated interfaces than your every-day native CPU
which makes the use of these devices a painful experience. Some of the pain points, when
writing such device code, are:</p>

<ul>
<li>non-portable: frameworks have different interfaces, devices support different versions and
machines might have different hardware - all this leads to code that will be executable only on
a very specific set of machines and platforms.</li>
<li>steep learning curve: executing code on a device through a framework is quite different to
running code on the native CPU and comes with a lot of hurdles. OpenCLs 1.2 specification for
example has close to 400 pages.</li>
<li>custom code: integrating support for devices into your project, requires the need for writing
a lot of custom code e.g. kernels, memory management, genereal business logic.</li>
</ul>

<p>But writing code for devices would often be a good choice as these devices can execute many
operations a lot faster than the native CPUs. GPUs for example can execute operations roughly
one to two orders of magnitudes faster, thanks to better support of parallising operations.
OpenCL and CUDA make parallising operations super easy.</p>

<p>With Collenchyma we eleminate the pain points of writing device code, so you can run your code
like any other Rust code, don&#39;t need to learn about kernels, events, or memory
synchronization, and can deploy your code with ease to servers, desktops or mobiles and
your code will make full use of the underlying hardware.</p>

<h2 id='architecture' class='section-header'><a href='#architecture'>Architecture</a></h2>
<p>The single entry point of Collenchyma is a <a href="./backend/index.html">Backend</a>. A Backend is agnostic over the <a href="./device/index.html">Device</a> it
runs <a href="./operation/index.html">Operations</a> on. In order to be agnostic over the Device, such as native host CPU, GPUs,
Accelerators or other types of <a href="./hardware/index.html">Hardware</a>, the Backend needs to be agnostic over the
<a href="./framework/index.html">Framework</a> as well. A Framework is a computation language such as OpenCL, Cuda or the native programming
language. The Framework is important, as it provides us with the interface to turn Hardware into Devices and
therefore, among other things, execute Operations on the created Device. With a Framework, we get access to Hardware
as long as the Hardware supports the Framework. As different vendors of Hardware use different
Frameworks, it becomes important that the Backend is agnostic over the Framework, which allows us, that we can
really run computations on any machine such as servers, desktops and mobiles without the need to worry about what
Hardware is available on the machine. That gives us the freedom to write code once and deploy it on different
machines where it will execute on the most potent Hardware by default.</p>

<p>Operations get introduced by a <a href="./libraries/index.html">Library</a>. A Library provides which operations are available and provides
the finished implementation of an Operation. This allows us, to implement the Library directly on the Backend, which
gives us a native Rust interface to execute our Operations. The interface is like any other interface e.g. to
execute the dot product operation we can simply call <code>backend.dot(...)</code>. If the dot Operation is executed on e.g.
one or many GPUs or CPUs depends solely on how you configured the Backend or if you did not further specify which
Framework and Hardware to use, solely on the machine you execute the dot Operation on. A Library exposes the
Operation traits, which define one <code>computation</code> method, that is further defined by the Framework, where the
exact Operation execution is stated. In the field of Operation there is one more component
- the <a href="./binary/index.html">Binary</a>. As - different to executing code on the native CPU - devices need to compile and build the
Operation, which is a significant part of a Framework, each Framework exposes a Binary representation, which mounts
the Operations exposed by a Library.</p>

<p>The last peace of Collenchyma is the <a href="./memory/index.html">Memory</a>. A Operation happens over data, but this data needs to be
accessable by the device on which the Operation is executed. The process is therefore often, that memory space needs
to be allocated on the device and then in a later step, synced from the host to the device or from
the device back to the host. Thanks to <a href="./shared-memory/index.html">SharedMemory</a> we do not have to care about memory management
between devices for the execution of Operations. SharedMemory tracks and automatically manages data and it&#39;s memory
accross devices, which is often the host and the Device. But it can also be passed around to different Backends.
Operations take as arguments SharedMemory and handle the synchronization and allocation for you.</p>

<h2 id='examples' class='section-header'><a href='#examples'>Examples</a></h2>
<p>Backend with custom defined Framework and Device.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>collenchyma</span> <span class='kw'>as</span> <span class='ident'>co</span>;
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>framework</span>::<span class='ident'>IFramework</span>;
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>backend</span>::{<span class='ident'>Backend</span>, <span class='ident'>BackendConfig</span>};
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>frameworks</span>::<span class='ident'>Native</span>;
<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='kw'>let</span> <span class='ident'>framework</span> <span class='op'>=</span> <span class='ident'>Native</span>::<span class='ident'>new</span>(); <span class='comment'>// Initialize the Framework</span>
    <span class='kw'>let</span> <span class='ident'>hardwares</span> <span class='op'>=</span> <span class='ident'>framework</span>.<span class='ident'>hardwares</span>(); <span class='comment'>// Now you can obtain a list of available hardware for that Framework.</span>
    <span class='comment'>// Create the custom Backend by providing a Framework and one or many Hardwares.</span>
    <span class='kw'>let</span> <span class='ident'>backend_config</span> <span class='op'>=</span> <span class='ident'>BackendConfig</span>::<span class='ident'>new</span>(<span class='ident'>framework</span>, <span class='ident'>hardwares</span>);
    <span class='kw'>let</span> <span class='ident'>backend</span> <span class='op'>=</span> <span class='ident'>Backend</span>::<span class='ident'>new</span>(<span class='ident'>backend_config</span>);
    <span class='comment'>// You can now execute all the operations available, e.g.</span>
    <span class='comment'>// backend.dot(x, y);</span>
}</pre>

<p>Machine-agnostic Backend.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>collenchyma</span> <span class='kw'>as</span> <span class='ident'>co</span>;
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>framework</span>::<span class='ident'>IFramework</span>;
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>backend</span>::{<span class='ident'>Backend</span>, <span class='ident'>BackendConfig</span>};
<span class='kw'>use</span> <span class='ident'>co</span>::<span class='ident'>frameworks</span>::<span class='ident'>Native</span>;
<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='comment'>// Not yet implemented.</span>
    <span class='comment'>// No need to provide a Backend Configuration.</span>
    <span class='comment'>// let backend = Backend::new(None);</span>
    <span class='comment'>// You can now execute all the operations available, e.g.</span>
    <span class='comment'>// backend.dot(x, y);</span>
}</pre>

<h2 id='development' class='section-header'><a href='#development'>Development</a></h2>
<p>At the moment Collenchyma itself will provide Rust APIs for the important frameworks - OpenCL
and CUDA. One step we are looking out for is to seperate OpenCL and CUDA into their own crate.
Something similar to <a href="https://github.com/tomaka/glium">Glium</a>.</p>

<p>Every operation exposed via a library and implemented on the backend, should take as the last argument an
<code>Option&lt;OperationConfig&gt;</code> to specify custom parallelisation behaviour and tracking the operation via events.</p>

<p>When initializing a new Backend from a BackendConfig you might not want to specify the Framework, which is currently
mandatory. Leaving it blank, the Backend would try to use the most potent Framework given the underlying hardware,
which would be probably in this order Cuda -&gt; OpenCL -&gt; Native. The setup might take longer, as every framework
needs to be checked, and devices be loaded in order to identify the best setup. But this would allow, that you
really could deploy a Collenchyma-backed application to almost any hardware - server, desktops, mobiles.</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='mod' href='backend/index.html'
                               title='collenchyma::backend'>backend</a></td>
                        <td class='docblock short'>
                             <p>Provides the interface for running parallel computations on one ore many devices.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='binary/index.html'
                               title='collenchyma::binary'>binary</a></td>
                        <td class='docblock short'>
                             <p>Provides the generic functionality for a backend-specific implementation of a
<a href="../libraries/index.html">library</a>.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='device/index.html'
                               title='collenchyma::device'>device</a></td>
                        <td class='docblock short'>
                             <p>Provides a representation for one or many ready to use hardwares.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='error/index.html'
                               title='collenchyma::error'>error</a></td>
                        <td class='docblock short'>
                             <p>Defines the general set of error types in Collenchyma.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='framework/index.html'
                               title='collenchyma::framework'>framework</a></td>
                        <td class='docblock short'>
                             <p>Provides the generic functionality of a hardware supporting frameworks such as native CPU, OpenCL,
CUDA, etc..</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='frameworks/index.html'
                               title='collenchyma::frameworks'>frameworks</a></td>
                        <td class='docblock short'>
                             <p>Exposes the specific Framework implementations.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='hardware/index.html'
                               title='collenchyma::hardware'>hardware</a></td>
                        <td class='docblock short'>
                             <p>Provides a representation for a collection of available compute units e.g. CPUs or GPUs.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='libraries/index.html'
                               title='collenchyma::libraries'>libraries</a></td>
                        <td class='docblock short'>
                             <p>Exposes the explicit implementations of <a href="../operation/index.html">operations</a> on a <a href="../backend/index.html">backend</a>.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='memory/index.html'
                               title='collenchyma::memory'>memory</a></td>
                        <td class='docblock short'>
                             <p>Provides a representation for memory across different frameworks.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='operation/index.html'
                               title='collenchyma::operation'>operation</a></td>
                        <td class='docblock short'>
                             <p>Provides the generic functionality for backend-agnostic operations.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='shared_memory/index.html'
                               title='collenchyma::shared_memory'>shared_memory</a></td>
                        <td class='docblock short'>
                             <p>Provides the functionality for memory management accross devices.</p>

                        </td>
                    </tr>
                </table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "collenchyma";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>